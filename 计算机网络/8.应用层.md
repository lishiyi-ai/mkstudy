## 域名系统DNS

#### 概述

​	**域名系统DNS**能够把互联网上的**主机名字转换为IP地址**。由于互联网规模很大，目前采用**层次树状结构的命名方法**。DNS使大多数名字都在**本地进行解析**，仅少量解析需要在互联网上通信，因此DNS系统效率很高。

#### 互联网的域名结构

​	(1) **国家顶级域名nTLD**：316个。
​	(2) **通用顶级域名gTLD**：20个。
​	(3) **基础结构域名**：只有一个arpa，用于反向域名解析。

#### 域名服务器

​	(1) **根域名服务器**：采用了**任播技术**(一组不同地点的主机，但具有相同的IP地址)
​	(2) **顶级域名服务器**：**负责管理**在该顶级域名服务器注册的所有**二级域名**。
​	(3) **权限域名服务器**：负责一个区的域名服务器。
​	(4) **本地域名服务器**：当一台主机发出DNS查询请求时，这个**查询请求报文就发送给本地域名服务器**。
​	**DNS查询举例：**
​		1.**迭代查询** 2.**递归查询**
​	**域名服务器中广泛地使用了高速缓存。**

## 文件传送协议FTP

#### 概述

​	1.基于TCP的FTP 和 基于UDP的简单文件传送协议TFTP，它们是文件共享协议中的一大类，即复制整个文件，特点：若要**存取一个文件**，就必须**先获得一个本地的文件副本**。如果修改文件，**只能对文件的副本进行修改**，然后**再将修改后的文件副本传回到原节点**。
​	2.第二类：联机访问，操作系统中的文件系统提供对共享文件的透明存取，优点是：将原来用于处理本地文件的应用程序用来处远地文件时，不需要对该应用程序做明显改动。

#### 基本工作原理(基于TCP的FTP)

主进程工作步骤如下：建立连接，启动从属进程，对客户请求进行处理。
从属进程包括：**控制进程** 和 **数据传送进程**。
FTP的客户和服务器之间要建立两个并行的TCP连接：**"控制连接"** 和 **"数据连接"** 。控制信息是**带外传送**的。
在网络文件系统NFS则采用另一种思路，NFS允许应用进程打开一个远地文件，并能能**在该文件的某一个特定的位置上开始读写数据**。

#### 简单文件传输协议TFTP

**TFTP的主要优点**：第一，TFTP可用于UDP环境；第二，TFTP代码所占的内存小。
TFTP的主要特点：
	1.每次传送的数据报文中有512字节的数据，但最后依次可以不足512字节(表示最后一个)。
	2.数据报文按序号编号，从1开始。
	3.支持ASCII码或二进制传送。
	4.可对文件进行读或写。
	5.使用很简单的首部。

## 远程终端协议TELNET

TELNET采用服务器客户端方式。本地系统允许TELNET客户进程，而在远地主机则运行TELNET服务进程。
TELNET定义了数据和命令应怎样通过互联网。这些定义就是所谓的网络虚拟终端NVT。
	客户端把用户击键和命令转换成NVT格式，并交送服务器。服务器软件把收到的数据和命令从NVT格式转换成原地系统所需的格式。

## 万维网WWW

#### 概述

​	万维网WWW是一个大规模的、联机式的信息储藏所，简称Web。万维网是一个分布式的超媒体系统，是超文本系统的扩充。超文本指的是包含指向其他文档的链接的文本。超文本文档仅包含文本信息，超媒体文档还包含其他表示方式的信息。**

#### 统一资源定位符URL

​	**统一资源定位符URL**是用来表示从互联网上得到的**资源位置**和**访问这些资源的方法**。
​	URL的一般形式：**协议 :// 主机名{：端口}(通常忽略) / 路径**
​	URL的 **"协议"** ，**"主机名"**部分，**字母不区分大小写**。

#### 超文本传送协议HTTP 使用TCP

##### HTTP的操作过程	

​	**建立TCP连接进行HTTP报文传输。**
​	HTTP是一个**面向事务的应用层协议**，是万维网能够**可靠地交换文件**地重要基础。
​	**HTTP本身是无连接的**，HTTP使用了TCP链接，但通信的双方在交换HTTP之前不需要建立HTTP链接报文。
​	**协议HTTP是无状态的**，HTTP不会记录哪个客户访问过，也不记得为该顾客服务了多少次。这**使得服务器更容易支持大量并发的HTTP请求**。
​	HTTP/1.0的主要缺点，就是**每请求一个文档就要有两倍RTT的开销**，若一个主页上有很多链接的对象需要依次链接。另一种开销则是**每一次建立新的TCP连接都要分配缓存和变量**。这种非持续的连续会使万维网服务器的负担很重。

​	HTTP/1.1 使用了持续连接，服务器在发送响应后仍然在一段时间内保持这条连接，使同一用户可以继续使用该连接请求数据。HTTP/1.1持续连接有 **非流水线方式** 和 **流水线方式**。

​	HTTP/2.0协议的特点：
​		1.HTTP/2把服务器发回的响应变成可以并行的发回(使用同一个TCP连接)
​		2.HTTP/2允许客户复用TCP连接进行多个请求，这样就节省了TCP多次建立和释放连接所花费的时间
​		3.HTTP/2把所有的报文都划分为许多较小的**二进制编码的帧**，采用了**新的压缩算法**，不发送重复的首部字段，大大减小了首部的开销，提高了传输效率。

##### 代理服务器

​	代理服务器是一种**网络实体**，它又称为**万维网高速缓存**。以代理服务器方式构成的**内容分发网络CDN**在互联网种起到很大的作用。

##### HTTP的报文结构

​	HTTP的两类报文：
​		1.**请求报文** 2.**响应报文**

​	HTTP是**面向文本**的，因此报文中的每一个字段都是一些**ASCII码串**

​	HTTP报文的组成：
​		1.**开始行**，在**请求报文中叫做请求行**，在**响应报文种叫做状态行**，开始行的三个字段以空格分开，以CR，LF为结尾。
​		2.**首部行**，用来说明**浏览器**，**服务器**或**报文主体**的一些信息。
​		3.**实体主体**，请求报文一般不用这个字段，而在响应报文中也可能没有这个字段。

​	**请求报文的特点**：
​		1.请求行包括三个内容：**方法**，**URL**，**HTTP版本**
​		2.第二行给出主机的域名，第三行告诉服务器连接是否连接，第四行浏览器类型，第五行表示用户希望的语言版本。
​	**响应报文的特点**：
​		1.状态行包括：**HTTP版本**，**状态码**，以及**状态码的简单短语**
​			状态码的五大类：
​				1xx 通知信息，2xx成功，3xx重定向，4xx客户的差错，5xx服务器差错。

##### 在服务器上存放用户的信息

​	有时候一些万维网网站希望能够识别用户，这时候会采用到**Cookie**来跟踪用户。

#### 万维网的文档

##### 超文本标记语言HTML

​	超文本标记语言HTML就是一种制作万维网页面的标准语言，他消除了不同计算机之间的信息交流的障碍。
​	XML 是**可扩展标记语言**。
​	XHTML是**可扩展超文本标记语言**。
​	CSS是**层叠样式表**。

##### 动态万维网文档

​	动态文档是指文档的内容是在浏览器**访问万维网服务器时才由应用程序动态创建的**。
​	**通用网关接口CGI**。CGI是一种标准，它定义了动态文档应如何创建，输入数据应如何提供给应用程序，输出结果如何使用。CGI程序的正式名字是**CGI脚本**。

##### 活动万维网文档

​	用于浏览器屏幕显示的连续更新，一种技术是**服务器推送**，服务器定期更新信息，并发送更新过的文档。另一种技术是**活动文档**，其将所有工作都转移给浏览器端，**浏览器请求一个活动文档时**，服务器就**返回一段活动文档程序副本**，该程序副本在浏览器端运行。

#### 万维网的信息检索系统

​	全文检索搜索，分类目录搜索，垂直搜索引擎，元搜索引擎(主要精力在提高搜索速度、智能化处理搜索结果)
​	Goole搜索技术的特点：
​		PageRank：对搜索出来的结果按重要性排序，更具体就是如果有很多网站上的连接都指向页面A，那么页面A就比较重要。PageRank对链接的书目都进行加权统计。

#### 博客和微博

​	博客是万维网日志的简称，博客使得网民不单是互联网上内容的消费者，也是内容的生产者。
​	微博就是微型博客。

#### 社交网站

​	SNS，Facebook，YouTube，LinkedIn，微信。

##  电子邮件 使用TCP

#### 概述

一个电子邮件系统应具有三个主要组成构件：**用户代理**，**邮件服务器**，以及**邮件发送协议**(如**STMP**)和**邮件读取协议**(如**POP3**)
用户代理至少具有以下**4个功能**：
	1.**撰写**，给用户提供编辑信件的环境。
	2.**显示**，能方便地在计算机屏幕显示出来信。
	3.**处理**，处理包括发送邮件和接收邮件。
	4.**通信**，发信人利用邮件发送协议发送到用户所使用的邮件服务器。收信人使用邮件读取协议从本地邮件服务器接收邮件。

电子邮件由**信封** 和 **内容**两部分组成。TCP/IP体系的电子邮件系统规定电子邮件地址格式如下：**用户名@邮件服务器的域名**。	

#### 简单邮件传送协议SMTP

SMTP通信的三个阶段：
	1.连接建立、2.邮件传送、3.连接释放

#### 电子邮件的信息格式

略

#### 邮件读取协议 **POP3** 和 **IMAP**

邮局协议POP是一个非常简单，但功能有限的邮件读取协议。
**POP3协议**的一个**特点**：只要用户从POP3服务器**读取了邮件**，POP3服务器**就把该邮件删除**。
IMAP协议的好处：用户可以在**不同的地方使用不同的计算机随时上网阅读和处理自己在邮件服务器中的邮件**。
IMAP协议的缺点：如果用户**没有将邮件复制到自己的计算机上** ，则**邮件一直存放在IMAP服务器上**。

#### 基于万维网的电子邮件

好处：不管在什么地方，只要能够找到上网的计算机，在打开任何一种给浏览器后，就可以非常方便地收发电子邮件。

#### 通用互联网邮件扩充MIME

**MIME概述**
	STMP的缺点：1.不能传送可执行文件或其他地二进制对象。2.SMTP限于传送7位的ASCII码。3.SMTP服务器会**拒绝超过一定长度邮件**。4.某些SMTP的实现并没有完全按照SMTP的互联网标准。
MIME主要包括以下三部分内容：
	1.5个新的邮件首部字段。
	2.定义了许多邮件内容的格式。
	3.定义了传送编码，可对任何内容格式进行转换，而不会被邮件系统改变。
5个新的邮件首部的名称及意义：
	1.MIME-Version：标志MIME的版本。
	2.Conten-Description：可读字符串，**说明邮件主体是否是图像，音频或视频**。
	3.Content-Id：邮件的唯一标识符。
	4.Content-Transfer-Encoding：在传送时邮件的**主体是如何编码**的。
	5.Content-Type：说明邮件**主体的数据类型和子类型**。

**内容传送编码**
	最简单的编码就是**7位ASCII码**。
	另一种编码称为**quoted-printable**。
	对于任意二进制文件，可以**base64编码**。

**内容类型**
	MIME标准规定Content-Type说明必须含有两个标识符，即**内容类型** 和 **子类型**。
	其中multipart，使邮件增加了相当大的灵活性，定了四种可能的子类型。
	**mixed子类**：允许单个报文含有多个相互独立的子报文。Boundary = name，用**--name进行划分子报文**。
	**alternative子类**：允许单个报文含有统一数据的多种表示。
	**parallel子类**：子类型允许单个报文含有可能同时显示的各个子部分。
	**digest子类**：允许单个报文含有其他一组报文。

## 动态主机配置协议DHCP

​	动态主机配置协议DHCP 用于**自动协议配置**，提供了**即插即联网**的机制。
​	需要IP地址的主教在启动时向DHCP服务器广播发送**发现报文**，DHCP服务器的**回答报文**叫做**提供报文**，表示提供IP等配置信息。
​	要求每一个网络至少有一个DHCP中继代理，它配置了DHCP的IP地址信息。
​	DHCP协议的工作过程：
​		1.客户端发送发现报文 2.服务器发送提供报文 3.客户端发送请求报文 4.服务端发送确认报文 5.租用期过半客户端再次请求 6.服务端根据情况确认或拒绝 7.客户端发出释放报文。

![DHCP协议的工作过程](E:\MarkDown_study\计算机网络\img\DHCP协议的工作过程.png)

## 简单网络管理协议SNMP 使用UDP 162端口

#### 基本概念

网络管理包括对**硬件、软件和人力**的**使用、 综合与协调**，以便对网络资源进行**监视、测试、配置、分析、评价和控制**。
**管理站**又称为**管理器**，管理站的所在部门也常称为**网络运行中心NOC**。
被管网络中有很多的**被管设备**，可以是：主机，路由器，打印机，集线器，网桥或调制解调器。被管设备中运行一个**网络管理代理程序**。
SNMP的网络管理由三个部分组成，**SNMP本身**，**管理信息结构SMI**，**管理信息库MIB**。
	**SNMP**定义了管理站和代理之间所**交换的分组格式**。完成网管作用。
	**SMI**定义了命名对象和定义对象类型的**通用规则**，以及把**对象和对象的值进行编码的规则**。建立规则
	**MIB**在被管理的实体中创建了命名对象，并规定了其类型。对变量进行说明。

#### 管理信息结构SMI

1.被管理对象的命名。被管对象都必须处在**对象命名树**上。
2.用来存储被管对象的数据类型有哪些。使用基本的**抽象语法记法1**。划分为**简单类型** 和 **结构化类型**。
3.在网络上传送的管理数据应如何编码。SMI使用**基本编码规则BER**进行数据的编码。由T-L-V三个字段组成的序列。

#### 管理信息库MIB

指的是在互联网的网关框架中**被管对象的集合**。

#### SNMP的协议数据单元和报文

实际上SNMP操作只有**两种基本的管理功能**，即：
	1."**读**"操作，用Get报文来检测各被管对象状况。
	2."**写**"操作，用Set报文来改变各被管对象的状况。

**SNMP报文格式**：
![SNMP的报文格式](E:\MarkDown_study\计算机网络\img\SNMP的报文格式.png)

## 应用进程跨网络的通信

#### 系统调用和应用编程接口

​	大多数操作系统使用**系统调用的机制在应用程序和操作系统之间传递控制权**。
#### 几种常用的系统调用

​	1.连接建立阶段 2.数据传送阶段 3.连接释放阶段。

## P2P应用

#### 具有集中目录服务器的P2P工作方式

​	最早使用P2P工作方式的是**Naspter**。

#### 具有全分布式结构的P2P文件共享程序

​	GNutella为代表的第二代P2P文件共享程序。Gnutella设计了一种**有限范围的洪泛查询**。
​	第三代P2P共享文件程序，使用**分散定位** 和 **分散传输技术**。
​	过程中需要考虑的几个问题：
​		1.哪些文件块需要先请求。A使用**最稀有优先技术**：
​		2.A应当想那些相邻对等放发送请求。**采用方法基本思想**：凡当前有**以最高数据率向A传送文件块的某相邻对等方**，A就优先把所请求的文件块传送给该相邻对等方。

#### P2P文件分发的分析

**客户服务器型**：Tcs = max{NF/us，F/dmin}。

主机都下载完文件F的最少时间下限(**P2P**)是：

​	Tp2p >= {F/us，F/dmin，NF/ut}
​	**NF是从服务器得到的数据总量**，**us是服务器上传速度**。**dmin是主机下载的最慢速率**。**ut是所有主机的上传速率之和**。

#### P2P对等方中搜索对象

**分布式散列表DHT，基于DHT的Chord环**
